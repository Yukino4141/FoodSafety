<!-- pages/profile/profile.wxml -->
<view class="container">
  <view class="header-section">
    <view class="user-card">
      <block wx:if="{{isLoggedIn}}">
        <image class="avatar" src="{{userInfo.avatarUrl || '/assets/images/default-avatar.png'}}" mode="aspectFill"></image>
        <view class="user-info">
          <text class="nickname">{{userInfo.nickName}}</text>
          <text class="user-tag">食安守护者</text>
        </view>
      </block>
      <block wx:else>
        <image class="avatar" src="/assets/images/default-avatar.png" mode="aspectFill"></image>
        <button class="login-btn" bindtap="handleLogin">点击登录账号</button>
      </block>
    </view>
  </view>

  <view class="stats-card">
    <view class="stats-item" bindtap="viewHistory">
      <text class="stats-num">{{stats.totalScan}}</text>
      <text class="stats-label">累计检测</text>
    </view>
    <view class="stats-item">
      <text class="stats-num risk">{{stats.riskCount}}</text>
      <text class="stats-label">发现风险</text>
    </view>
    <view class="stats-item">
      <text class="stats-num safe">{{stats.safeCount}}</text>
      <text class="stats-label">安全通过</text>
    </view>
    <view class="stats-item" bindtap="viewFavorites">
      <text class="stats-num">{{stats.favoriteCount}}</text>
      <text class="stats-label">我的收藏</text>
    </view>
  </view>

  <view class="menu-list">
    <view class="menu-item" wx:for="{{menuItems}}" wx:key="text" bindtap="navigateTo" data-url="{{item.url}}">
      <view class="menu-left">
        <view class="icon-wrapper {{item.icon}}">
          <view class="dot"></view>
        </view>
        <text class="menu-text">{{item.text}}</text>
      </view>
      <view class="arrow-right"></view>
    </view>
  </view>

  <view class="footer-section" wx:if="{{isLoggedIn}}">
    <button class="logout-btn" bindtap="handleLogout">退出当前账号</button>
  </view>
</view>