<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itheima.server.mapper.EmployeeMapper">

    <!-- 根据ID查询员工 -->
    <select id="getById" resultType="com.itheima.pojo.entity.Employee">
        SELECT * FROM employee WHERE id = #{id}
    </select>

    <!-- 根据用户名查询员工 -->
    <select id="getByUsername" resultType="com.itheima.pojo.entity.Employee">
        SELECT * FROM employee WHERE username = #{username}
    </select>

    <!-- 查询所有员工 -->
    <select id="listAll" resultType="com.itheima.pojo.entity.Employee">
        SELECT * FROM employee ORDER BY id DESC
    </select>

    <!-- 新增员工 -->
    <insert id="insert" parameterType="com.itheima.pojo.entity.Employee" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO employee (
            username, password, name, phone, status, create_time, update_time
        ) VALUES (
                     #{username},
                     #{password},
                     #{name},
                     #{phone},
                     #{status},
                     #{createTime},
                     #{updateTime}
                 )
    </insert>

    <!-- 更新员工 -->
    <update id="update" parameterType="com.itheima.pojo.entity.Employee">
        UPDATE employee
        <set>
            <if test="username != null and username != ''">
                username = #{username},
            </if>
            <if test="password != null and password != ''">
                password = #{password},
            </if>
            <if test="name != null and name != ''">
                name = #{name},
            </if>
            <if test="phone != null">
                phone = #{phone},
            </if>
            <if test="status != null">
                status = #{status},
            </if>
            <if test="updateTime != null">
                update_time = #{updateTime}
            </if>
        </set>
        WHERE id = #{id}
    </update>

    <!-- 根据ID删除员工 -->
    <delete id="deleteById">
        DELETE FROM employee WHERE id = #{id}
    </delete>

</mapper>